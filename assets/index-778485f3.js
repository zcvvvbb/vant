import{G as Z,m as _,c as j,h as J,I as z,q as I,Y as Q,Z as W,l as p,n as ee,H as te}from"./use-translate-71d4880c.js";import{u as ae}from"./use-touch-4e22f945.js";import{A as ne,y as V,D as A,e as S}from"./vue-libs-19c20d28.js";import{c as x,n as Y,w as re}from"./with-install-560d59bf.js";const[ie,g]=j("slider"),le={min:x(0),max:x(100),step:x(1),range:Boolean,reverse:Boolean,disabled:Boolean,readonly:Boolean,vertical:Boolean,barHeight:Y,buttonSize:Y,activeColor:String,inactiveColor:String,modelValue:{type:[Number,Array],default:0}},oe=ne({name:ie,props:le,emits:["change","dragEnd","dragStart","update:modelValue"],setup(t,{emit:b,slots:N}){let m,o,c;const C=V(),B=[V(),V()],u=V(),h=ae(),f=A(()=>Number(t.max)-Number(t.min)),D=A(()=>{const e=t.vertical?"width":"height";return{background:t.inactiveColor,[e]:J(t.barHeight)}}),s=e=>t.range&&Array.isArray(e),H=()=>{const{modelValue:e,min:a}=t;return s(e)?`${(e[1]-e[0])*100/f.value}%`:`${(e-Number(a))*100/f.value}%`},M=()=>{const{modelValue:e,min:a}=t;return s(e)?`${(e[0]-Number(a))*100/f.value}%`:"0%"},R=A(()=>{const a={[t.vertical?"height":"width"]:H(),background:t.activeColor};u.value&&(a.transition="none");const n=()=>t.vertical?t.reverse?"bottom":"top":t.reverse?"right":"left";return a[n()]=M(),a}),v=e=>{const a=+t.min,n=+t.max,i=+t.step;e=te(e,a,n);const r=Math.round((e-a)/i)*i;return W(a,r)},P=()=>{const e=t.modelValue;s(e)?c=e.map(v):c=v(e)},X=e=>{const a=e[0]??Number(t.min),n=e[1]??Number(t.max);return a>n?[n,a]:[a,n]},d=(e,a)=>{s(e)?e=X(e).map(v):e=v(e),z(e,t.modelValue)||b("update:modelValue",e),a&&!z(e,c)&&b("change",e)},$=e=>{if(e.stopPropagation(),t.disabled||t.readonly)return;P();const{min:a,reverse:n,vertical:i,modelValue:r}=t,l=I(C),L=()=>i?n?l.bottom-e.clientY:e.clientY-l.top:n?l.right-e.clientX:e.clientX-l.left,O=i?l.height:l.width,y=Number(a)+L()/O*f.value;if(s(r)){const[k,E]=r,U=(k+E)/2;y<=U?d([y,E],!0):d([k,y],!0)}else d(y,!0)},q=e=>{t.disabled||t.readonly||(h.start(e),o=t.modelValue,P(),u.value="start")},F=e=>{if(t.disabled||t.readonly)return;u.value==="start"&&b("dragStart",e),p(e,!0),h.move(e),u.value="dragging";const a=I(C),n=t.vertical?h.deltaY.value:h.deltaX.value,i=t.vertical?a.height:a.width;let r=n/i*f.value;if(t.reverse&&(r=-r),s(c)){const l=t.reverse?1-m:m;o[l]=c[l]+r}else o=c+r;d(o)},T=e=>{t.disabled||t.readonly||(u.value==="dragging"&&(d(o,!0),b("dragEnd",e)),u.value="")},G=e=>typeof e=="number"?g("button-wrapper",["left","right"][e]):g("button-wrapper",t.reverse?"left":"right"),K=(e,a)=>{const n=u.value==="dragging";if(typeof a=="number"){const i=N[a===0?"left-button":"right-button"];let r;if(n&&Array.isArray(o)&&(r=o[0]>o[1]?m^1:m),i)return i({value:e,dragging:n,dragIndex:r})}return N.button?N.button({value:e,dragging:n}):S("div",{class:g("button"),style:ee(t.buttonSize)},null)},w=e=>{const a=typeof e=="number"?t.modelValue[e]:t.modelValue;return S("div",{ref:B[e??0],role:"slider",class:G(e),tabindex:t.disabled?void 0:0,"aria-valuemin":t.min,"aria-valuenow":a,"aria-valuemax":t.max,"aria-disabled":t.disabled||void 0,"aria-readonly":t.readonly||void 0,"aria-orientation":t.vertical?"vertical":"horizontal",onTouchstartPassive:n=>{typeof e=="number"&&(m=e),q(n)},onTouchend:T,onTouchcancel:T,onClick:Q},[K(a,e)])};return d(t.modelValue),Z(()=>t.modelValue),B.forEach(e=>{_("touchmove",F,{target:e})}),()=>S("div",{ref:C,style:D.value,class:g({vertical:t.vertical,disabled:t.disabled}),onClick:$},[S("div",{class:g("bar"),style:R.value},[t.range?[w(0),w(1)]:w()])])}}),ue=re(oe),fe=ue;export{fe as V};
