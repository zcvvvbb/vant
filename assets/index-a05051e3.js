import{A as Z,y as _,D as b,u as I,e as S,j as y,v as x,B as A,q as J}from"./vue-libs-19c20d28.js";import{G as Q,c as X,E as R,i as k,h as z,n as Y,F as p,l as N,Z as ee}from"./use-translate-71d4880c.js";import{H as G,L as te}from"./constant-ee6e27d7.js";import{c,t as d,n as v,w as ne}from"./with-install-560d59bf.js";import{c as ae}from"./interceptor-5424332a.js";const[le,P]=X("stepper"),ie=200,V=(t,i)=>String(t)===String(i),ue={min:c(1),max:c(1/0),name:c(""),step:c(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:d,showMinus:d,showInput:d,longPress:d,autoFixed:d,allowEmpty:Boolean,modelValue:v,inputWidth:v,buttonSize:v,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:c(1),decimalLength:v},se=Z({name:le,props:ue,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(t,{emit:i}){const o=(e,n=!0)=>{const{min:u,max:h,allowEmpty:l,decimalLength:g}=t;return l&&e===""||(e=R(String(e),!t.integer),e=e===""?0:+e,e=Number.isNaN(e)?+u:e,e=n?Math.max(Math.min(+h,e),+u):e,k(g)&&(e=e.toFixed(+g))),e},q=()=>{const e=t.modelValue??t.defaultValue,n=o(e);return V(n,t.modelValue)||i("update:modelValue",n),n};let s;const E=_(),a=_(q()),m=b(()=>t.disabled||t.disableMinus||+a.value<=+t.min),r=b(()=>t.disabled||t.disablePlus||+a.value>=+t.max),H=b(()=>({width:z(t.inputWidth),height:z(t.buttonSize)})),B=b(()=>Y(t.buttonSize)),O=()=>{const e=o(a.value);V(e,a.value)||(a.value=e)},C=e=>{t.beforeChange?ae(t.beforeChange,{args:[e],done(){a.value=e}}):a.value=e},w=()=>{if(s==="plus"&&r.value||s==="minus"&&m.value){i("overlimit",s);return}const e=s==="minus"?-t.step:+t.step,n=o(ee(+a.value,e));C(n),i(s)},W=e=>{const n=e.target,{value:u}=n,{decimalLength:h}=t;let l=R(String(u),!t.integer);if(k(h)&&l.includes(".")){const D=l.split(".");l=`${D[0]}.${D[1].slice(0,+h)}`}t.beforeChange?n.value=String(a.value):V(u,l)||(n.value=l);const g=l===String(+l);C(g?+l:l)},$=e=>{var n;t.disableInput?(n=E.value)==null||n.blur():i("focus",e)},j=e=>{const n=e.target,u=o(n.value,t.autoFixed);n.value=String(u),a.value=u,J(()=>{i("blur",e),p()})};let T,f;const L=()=>{f=setTimeout(()=>{w(),L()},ie)},K=()=>{t.longPress&&(T=!1,clearTimeout(f),f=setTimeout(()=>{T=!0,w(),L()},te))},F=e=>{t.longPress&&(clearTimeout(f),T&&N(e))},U=e=>{t.disableInput&&N(e)},M=e=>({onClick:n=>{N(n),s=e,w()},onTouchstartPassive:()=>{s=e,K()},onTouchend:F,onTouchcancel:F});return I(()=>[t.max,t.min,t.integer,t.decimalLength],O),I(()=>t.modelValue,e=>{V(e,a.value)||(a.value=o(e))}),I(a,e=>{i("update:modelValue",e),i("change",e,{name:t.name})}),Q(()=>t.modelValue),()=>S("div",{role:"group",class:P([t.theme])},[y(S("button",A({type:"button",style:B.value,class:[P("minus",{disabled:m.value}),{[G]:!m.value}],"aria-disabled":m.value||void 0},M("minus")),null),[[x,t.showMinus]]),y(S("input",{ref:E,type:t.integer?"tel":"text",role:"spinbutton",class:P("input"),value:a.value,style:H.value,disabled:t.disabled,readonly:t.disableInput,inputmode:t.integer?"numeric":"decimal",placeholder:t.placeholder,"aria-valuemax":t.max,"aria-valuemin":t.min,"aria-valuenow":a.value,onBlur:j,onInput:W,onFocus:$,onMousedown:U},null),[[x,t.showInput]]),y(S("button",A({type:"button",style:B.value,class:[P("plus",{disabled:r.value}),{[G]:!r.value}],"aria-disabled":r.value||void 0},M("plus")),null),[[x,t.showPlus]])])}}),oe=ne(se),he=oe;export{he as V};
