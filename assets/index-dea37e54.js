import{f as M,s as p,a as T,p as A}from"./utils-8240f58e.js";import{P as I}from"./index-f9632b61.js";import{A as N,y as B,D,u as P,e as E,B as F}from"./vue-libs-19c20d28.js";import{I as V,p as K,c as L,e as O}from"./use-translate-71d4880c.js";import{c,w as R}from"./with-install-560d59bf.js";const[U]=L("time-picker"),k=n=>/^([01]\d|2[0-3]):([0-5]\d):([0-5]\d)$/.test(n),_=["hour","minute","second"],$=O({},p,{minHour:c(0),maxHour:c(23),minMinute:c(0),maxMinute:c(59),minSecond:c(0),maxSecond:c(59),minTime:{type:String,validator:k},maxTime:{type:String,validator:k},columnsType:{type:Array,default:()=>["hour","minute"]},filter:Function}),b=N({name:U,props:$,emits:["confirm","cancel","change","update:modelValue"],setup(n,{emit:d,slots:S}){const a=B(n.modelValue),h=e=>{const t=e.split(":");return _.map((u,r)=>n.columnsType.includes(u)?t[r]:"00")},x=D(()=>{let{minHour:e,maxHour:t,minMinute:u,maxMinute:r,minSecond:v,maxSecond:g}=n;if(n.minTime||n.maxTime){const i={hour:0,minute:0,second:0};n.columnsType.forEach((l,s)=>{i[l]=a.value[s]??0});const{hour:m,minute:o}=i;if(n.minTime){const[l,s,f]=h(n.minTime);e=l,u=+m<=+e?s:"00",v=+m<=+e&&+o<=+u?f:"00"}if(n.maxTime){const[l,s,f]=h(n.maxTime);t=l,r=+m>=+t?s:"59",g=+m>=+t&&+o>=+r?f:"59"}}return n.columnsType.map(i=>{const{filter:m,formatter:o}=n;switch(i){case"hour":return T(+e,+t,i,o,m,a.value);case"minute":return T(+u,+r,i,o,m,a.value);case"second":return T(+v,+g,i,o,m,a.value);default:return[]}})});P(a,e=>{V(e,n.modelValue)||d("update:modelValue",e)}),P(()=>n.modelValue,e=>{e=M(e,x.value),V(e,a.value)||(a.value=e)},{immediate:!0});const C=(...e)=>d("change",...e),y=(...e)=>d("cancel",...e),H=(...e)=>d("confirm",...e);return()=>E(I,F({modelValue:a.value,"onUpdate:modelValue":e=>a.value=e,columns:x.value,onChange:C,onCancel:y,onConfirm:H},K(n,A)),S)}}),j=R(b),Q=j;export{Q as V};
