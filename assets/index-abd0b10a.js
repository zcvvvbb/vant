import{f as w,s as I,p as T,a as s,g as A}from"./utils-8240f58e.js";import{P as B}from"./index-f9632b61.js";import{A as E,y as g,D as N,u as h,e as S,B as K}from"./vue-libs-19c20d28.js";import{I as u,p as R,c as U,e as _,V as y}from"./use-translate-71d4880c.js";import{w as b}from"./with-install-560d59bf.js";const x=new Date().getFullYear(),[j]=U("date-picker"),q=_({},I,{columnsType:{type:Array,default:()=>["year","month","day"]},minDate:{type:Date,default:()=>new Date(x-10,0,1),validator:y},maxDate:{type:Date,default:()=>new Date(x+10,11,31),validator:y}}),z=E({name:j,props:q,emits:["confirm","cancel","change","update:modelValue"],setup(a,{emit:r,slots:M}){const n=g(a.modelValue),l=g(!1),v=()=>{const e=a.minDate.getFullYear(),t=a.maxDate.getFullYear();return s(e,t,"year",a.formatter,a.filter)},i=e=>e===a.minDate.getFullYear(),d=e=>e===a.maxDate.getFullYear(),V=e=>e===a.minDate.getMonth()+1,Y=e=>e===a.maxDate.getMonth()+1,m=e=>{const{minDate:t,columnsType:o}=a,c=o.indexOf(e),f=l.value?a.modelValue[c]:n.value[c];if(f)return+f;switch(e){case"year":return t.getFullYear();case"month":return t.getMonth()+1;case"day":return t.getDate()}},P=()=>{const e=m("year"),t=i(e)?a.minDate.getMonth()+1:1,o=d(e)?a.maxDate.getMonth()+1:12;return s(t,o,"month",a.formatter,a.filter)},k=()=>{const e=m("year"),t=m("month"),o=i(e)&&V(t)?a.minDate.getDate():1,c=d(e)&&Y(t)?a.maxDate.getDate():A(e,t);return s(o,c,"day",a.formatter,a.filter)},D=N(()=>a.columnsType.map(e=>{switch(e){case"year":return v();case"month":return P();case"day":return k();default:return[]}}));h(n,e=>{u(e,a.modelValue)||r("update:modelValue",e)}),h(()=>a.modelValue,(e,t)=>{l.value=u(t,n.value),e=w(e,D.value),u(e,n.value)||(n.value=e),l.value=!1},{immediate:!0});const C=(...e)=>r("change",...e),F=(...e)=>r("cancel",...e),O=(...e)=>r("confirm",...e);return()=>S(B,K({modelValue:n.value,"onUpdate:modelValue":e=>n.value=e,columns:D.value,onChange:C,onCancel:F,onConfirm:O},R(a,T)),M)}}),G=b(z),X=G;export{X as V};
